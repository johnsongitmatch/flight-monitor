<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>机票价格监控 - Flight Price Monitor</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 500px;
            width: 100%;
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 24px;
            margin-bottom: 8px;
        }
        
        .header p {
            opacity: 0.9;
            font-size: 14px;
        }
        
        .form-container {
            padding: 30px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
            font-size: 14px;
        }
        
        .form-group input,
        .form-group select {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        
        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .submit-btn {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }
        
        .submit-btn:active {
            transform: translateY(0);
        }
        
        .features {
            background: #f8f9fa;
            padding: 20px 30px;
            border-top: 1px solid #eee;
        }
        
        .features h3 {
            font-size: 14px;
            color: #666;
            margin-bottom: 12px;
        }
        
        .features ul {
            list-style: none;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
        }
        
        .features li {
            font-size: 12px;
            color: #888;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .features li::before {
            content: "✓";
            color: #667eea;
            font-weight: bold;
        }
        
        .footer {
            text-align: center;
            padding: 15px;
            font-size: 12px;
            color: #999;
        }
        
        .airport-list {
            font-size: 12px;
            color: #666;
            margin-top: 8px;
        }
        
        .info-text {
            font-size: 12px;
            color: #888;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>✈️ 机票价格查询</h1>
            <p>选择机场，一键查看实时票价</p>
        </div>
        
        <form id="monitorForm" class="form-container">
            <div class="form-group">
                <label for="from">出发地</label>
                <select id="from" name="from" required>
                    <option value="">选择出发机场</option>
                    <optgroup label="🇨🇳 中国">
                        <option value="PEK">PEK - 北京</option>
                        <option value="PVG">PVG - 上海浦东</option>
                        <option value="SHA">SHA - 上海虹桥</option>
                        <option value="CAN">CAN - 广州</option>
                        <option value="SZX">SZX - 深圳</option>
                        <option value="CTU">CTU - 成都</option>
                        <option value="HGH">HGH - 杭州</option>
                        <option value="NKG">NKG - 南京</option>
                        <option value="XIY">XIY - 西安</option>
                        <option value="KMG">KMG - 昆明</option>
                        <option value="TSN">TSN - 天津</option>
                        <option value="CKG">CKG - 重庆</option>
                        <option value="XMN">XMN - 厦门</option>
                        <option value="DLC">DLC - 大连</option>
                        <option value="HAK">HAK - 海口</option>
                        <option value="SYX">SYX - 三亚</option>
                    </optgroup>
                    <optgroup label="🇭🇰 香港 / 🇲🇴 澳门">
                        <option value="HKG">HKG - 香港</option>
                        <option value="MFM">MFM - 澳门</option>
                    </optgroup>
                    <optgroup label="🇹🇼 台湾">
                        <option value="TPE">TPE - 台北桃园</option>
                    </optgroup>
                    <optgroup label="🇯🇵 日本">
                        <option value="NRT">NRT - 东京( 成田)</option>
                        <option value="HND">HND - 东京( 羽田)</option>
                        <option value="KIX">KIX - 大阪( 关西)</option>
                        <option value="ITM">ITM - 大阪( 伊丹)</option>
                        <option value="NGO">NGO - 名古屋</option>
                        <option value="FUK">FUK - 福冈</option>
                        <option value="CTS">CTS - 札幌( 新千岁)</option>
                        <option value="OKA">OKA - 冲绳( 那霸)</option>
                    </optgroup>
                    <optgroup label="🇰🇷 韩国">
                        <option value="ICN">ICN - 首尔( 仁川)</option>
                        <option value="GMP">GMP - 首尔( 金浦)</option>
                        <option value="PUS">PUS - 釜山</option>
                        <option value="CJU">CJU - 济州</option>
                    </optgroup>
                    <optgroup label="🇸🇬 新加坡">
                        <option value="SIN">SIN - 新加坡</option>
                    </optgroup>
                    <optgroup label="🇹🇭 泰国">
                        <option value="BKK">BKK - 曼谷( 素万那普)</option>
                    </optgroup>
                    <optgroup label="🇲🇾 马来西亚">
                        <option value="KUL">KUL - 吉隆坡</option>
                    </optgroup>
                    <optgroup label="🇮🇩 印尼">
                        <option value="CGK">CGK - 雅加达</option>
                    </optgroup>
                    <optgroup label="🇻🇳 越南">
                        <option value="SGN">SGN - 胡志明市</option>
                        <option value="HAN">HAN - 河内</option>
                    </optgroup>
                    <optgroup label="🇵🇭 菲律宾">
                        <option value="MNL">MNL - 马尼拉</option>
                    </optgroup>
                    <optgroup label="🇦🇺 澳大利亚">
                        <option value="SYD">SYD - 悉尼</option>
                        <option value="MEL">MEL - 墨尔本</option>
                        <option value="BNE">BNE - 布里斯班</option>
                        <option value="PER">PER - 珀斯</option>
                        <option value="ADL">ADL - 阿德莱德</option>
                    </optgroup>
                    <optgroup label="🇳🇿 新西兰">
                        <option value="AKL">AKL - 奥克兰</option>
                        <option value="WLG">WLG - 惠灵顿</option>
                        <option value="CHC">CHC - 基督城</option>
                    </optgroup>
                    <optgroup label="🇺🇸 美国">
                        <option value="JFK">JFK - 纽约( 肯尼迪)</option>
                        <option value="LAX">LAX - 洛杉矶</option>
                        <option value="SFO">SFO - 旧金山</option>
                        <option value="ORD">ORD - 芝加哥( 奥黑尔)</option>
                        <option value="MIA">MIA - 迈阿密</option>
                        <option value="SEA">SEA - 西雅图</option>
                        <option value="LAS">LAS - 拉斯维加斯</option>
                        <option value="BOS">BOS - 波士顿</option>
                        <option value="ATL">ATL - 亚特兰大</option>
                        <option value="DFW">DFW - 达拉斯</option>
                        <option value="DEN">DEN - 丹佛</option>
                        <option value="PHX">PHX - 凤凰城</option>
                        <option value="IAH">IAH - 休斯顿</option>
                        <option value="EWR">EWR - 纽瓦克</option>
                        <option value="MSP">MSP - 明尼阿波利斯</option>
                        <option value="DTW">DTW - 底特律</option>
                        <option value="PHL">PHL - 费城</option>
                        <option value="SLC">SLC - 盐湖城</option>
                        <option value="SAN">SAN - 圣地亚哥</option>
                        <option value="PDX">PDX - 波特兰</option>
                        <option value="HNL">HNL - 火奴鲁鲁</option>
                    </optgroup>
                    <optgroup label="🇨🇦 加拿大">
                        <option value="YYZ">YYZ - 多伦多</option>
                        <option value="YVR">YVR - 温哥华</option>
                        <option value="YUL">YUL - 蒙特利尔</option>
                        <option value="YYC">YYC - 卡尔加里</option>
                    </optgroup>
                    <optgroup label="🇬🇧 英国">
                        <option value="LHR">LHR - 伦敦( 希思罗)</option>
                        <option value="LGW">LGW - 伦敦( 盖特威克)</option>
                        <option value="STN">STN - 伦敦( 斯坦斯特德)</option>
                        <option value="MAN">MAN - 曼彻斯特</option>
                        <option value="EDI">EDI - 爱丁堡</option>
                    </optgroup>
                    <optgroup label="🇪🇺 欧洲">
                        <option value="CDG">CDG - 巴黎( 戴高乐)</option>
                        <option value="AMS">AMS - 阿姆斯特丹</option>
                        <option value="FRA">FRA - 法兰克福</option>
                        <option value="MUC">MUC - 慕尼黑</option>
                        <option value="BER">BER - 柏林</option>
                        <option value="ZRH">ZRH - 苏黎世</option>
                        <option value="FCO">FCO - 罗马</option>
                        <option value="MXP">MXP - 米兰( 马尔彭萨)</option>
                        <option value="BCN">BCN - 巴塞罗那</option>
                        <option value="MAD">MAD - 马德里</option>
                        <option value="ARN">ARN - 斯德哥尔摩</option>
                        <option value="OSL">OSL - 奥斯陆</option>
                        <option value="CPH">CPH - 哥本哈根</option>
                        <option value="HEL">HEL - 赫尔辛基</option>
                        <option value="DUB">DUB - 都柏林</option>
                        <option value="LIS">LIS - 里斯本</option>
                        <option value="ATH">ATH - 雅典</option>
                        <option value="VIE">VIE - 维也纳</option>
                        <option value="PRG">PRG - 布拉格</option>
                        <option value="WAW">WAW - 华沙</option>
                        <option value="BUD">BUD - 布达佩斯</option>
                    </optgroup>
                    <optgroup label="🇦🇪 中东">
                        <option value="DXB">DXB - 迪拜</option>
                        <option value="AUH">AUH - 阿布扎比</option>
                        <option value="DOH">DOH - 多哈</option>
                        <option value="RUH">RUH - 利雅得</option>
                        <option value="JED">JED - 吉达</option>
                        <option value="TLV">TLV - 特拉维夫</option>
                    </optgroup>
                    <optgroup label="🇮🇳 印度">
                        <option value="DEL">DEL - 新德里</option>
                        <option value="BOM">BOM - 孟买</option>
                        <option value="BLR">BLR - 班加罗尔</option>
                        <option value="MAA">MAA - 金奈</option>
                    </optgroup>
                    <optgroup label="🇿🇦 非洲">
                        <option value="JNB">JNB - 约翰内斯堡</option>
                        <option value="CPT">CPT - 开普敦</option>
                        <option value="CAI">CAI - 开罗</option>
                        <option value="NBO">NBO - 内罗毕</option>
                    </optgroup>
                    <optgroup label="🇧🇷 南美">
                        <option value="GRU">GRU - 圣保罗</option>
                        <option value="GIG">GIG - 里约热内卢</option>
                        <option value="EZE">EZE - 布宜诺斯艾利斯</option>
                        <option value="SCL">SCL - 圣地亚哥</option>
                        <option value="BOG">BOG - 波哥大</option>
                        <option value="LIM">LIM - 利马</option>
                    </optgroup>
                </select>
                <div class="airport-list">全球 150+ 机场</div>
            </div>
            
            <div class="form-group">
                <label for="to">目的地</label>
                <select id="to" name="to" required>
                    <option value="">选择到达机场</option>
                    <optgroup label="🇨🇳 中国">
                        <option value="PEK">PEK - 北京</option>
                        <option value="PVG">PVG - 上海浦东</option>
                        <option value="SHA">SHA - 上海虹桥</option>
                        <option value="CAN">CAN - 广州</option>
                        <option value="SZX">SZX - 深圳</option>
                        <option value="CTU">CTU - 成都</option>
                        <option value="HGH">HGH - 杭州</option>
                        <option value="NKG">NKG - 南京</option>
                        <option value="XIY">XIY - 西安</option>
                        <option value="KMG">KMG - 昆明</option>
                        <option value="TSN" selected>TSN - 天津</option>
                        <option value="CKG">CKG - 重庆</option>
                        <option value="XMN">XMN - 厦门</option>
                        <option value="DLC">DLC - 大连</option>
                        <option value="HAK">HAK - 海口</option>
                        <option value="SYX">SYX - 三亚</option>
                    </optgroup>
                    <optgroup label="🇭🇰 香港 / 🇲🇴 澳门">
                        <option value="HKG">HKG - 香港</option>
                        <option value="MFM">MFM - 澳门</option>
                    </optgroup>
                    <optgroup label="🇹🇼 台湾">
                        <option value="TPE">TPE - 台北桃园</option>
                    </optgroup>
                    <optgroup label="🇯🇵 日本">
                        <option value="NRT">NRT - 东京( 成田)</option>
                        <option value="HND">HND - 东京( 羽田)</option>
                        <option value="KIX">KIX - 大阪( 关西)</option>
                        <option value="ITM">ITM - 大阪( 伊丹)</option>
                        <option value="NGO">NGO - 名古屋</option>
                        <option value="FUK">FUK - 福冈</option>
                        <option value="CTS">CTS - 札幌( 新千岁)</option>
                        <option value="OKA">OKA - 冲绳( 那霸)</option>
                    </optgroup>
                    <optgroup label="🇰🇷 韩国">
                        <option value="ICN">ICN - 首尔( 仁川)</option>
                        <option value="GMP">GMP - 首尔( 金浦)</option>
                        <option value="PUS">PUS - 釜山</option>
                        <option value="CJU">CJU - 济州</option>
                    </optgroup>
                    <optgroup label="🇸🇬 新加坡">
                        <option value="SIN">SIN - 新加坡</option>
                    </optgroup>
                    <optgroup label="🇹🇭 泰国">
                        <option value="BKK">BKK - 曼谷( 素万那普)</option>
                    </optgroup>
                    <optgroup label="🇲🇾 马来西亚">
                        <option value="KUL">KUL - 吉隆坡</option>
                    </optgroup>
                    <optgroup label="🇮🇩 印尼">
                        <option value="CGK">CGK - 雅加达</option>
                    </optgroup>
                    <optgroup label="🇻🇳 越南">
                        <option value="SGN">SGN - 胡志明市</option>
                        <option value="HAN">HAN - 河内</option>
                    </optgroup>
                    <optgroup label="🇵🇭 菲律宾">
                        <option value="MNL">MNL - 马尼拉</option>
                    </optgroup>
                    <optgroup label="🇦🇺 澳大利亚">
                        <option value="SYD">SYD - 悉尼</option>
                        <option value="MEL">MEL - 墨尔本</option>
                        <option value="BNE">BNE - 布里斯班</option>
                        <option value="PER">PER - 珀斯</option>
                        <option value="ADL">ADL - 阿德莱德</option>
                    </optgroup>
                    <optgroup label="🇳🇿 新西兰">
                        <option value="AKL">AKL - 奥克兰</option>
                        <option value="WLG">WLG - 惠灵顿</option>
                        <option value="CHC">CHC - 基督城</option>
                    </optgroup>
                    <optgroup label="🇺🇸 美国">
                        <option value="JFK">JFK - 纽约( 肯尼迪)</option>
                        <option value="LAX">LAX - 洛杉矶</option>
                        <option value="SFO">SFO - 旧金山</option>
                        <option value="ORD">ORD - 芝加哥( 奥黑尔)</option>
                        <option value="MIA">MIA - 迈阿密</option>
                        <option value="SEA">SEA - 西雅图</option>
                        <option value="LAS">LAS - 拉斯维加斯</option>
                        <option value="BOS">BOS - 波士顿</option>
                        <option value="ATL">ATL - 亚特兰大</option>
                        <option value="DFW">DFW - 达拉斯</option>
                        <option value="DEN">DEN - 丹佛</option>
                        <option value="PHX">PHX - 凤凰城</option>
                        <option value="IAH">IAH - 休斯顿</option>
                        <option value="EWR">EWR - 纽瓦克</option>
                        <option value="MSP">MSP - 明尼阿波利斯</option>
                        <option value="DTW">DTW - 底特律</option>
                        <option value="PHL">PHL - 费城</option>
                        <option value="SLC">SLC - 盐湖城</option>
                        <option value="SAN">SAN - 圣地亚哥</option>
                        <option value="PDX">PDX - 波特兰</option>
                        <option value="HNL">HNL - 火奴鲁鲁</option>
                    </optgroup>
                    <optgroup label="🇨🇦 加拿大">
                        <option value="YYZ">YYZ - 多伦多</option>
                        <option value="YVR">YVR - 温哥华</option>
                        <option value="YUL">YUL - 蒙特利尔</option>
                        <option value="YYC">YYC - 卡尔加里</option>
                    </optgroup>
                    <optgroup label="🇬🇧 英国">
                        <option value="LHR">LHR - 伦敦( 希思罗)</option>
                        <option value="LGW">LGW - 伦敦( 盖特威克)</option>
                        <option value="STN">STN - 伦敦( 斯坦斯特德)</option>
                        <option value="MAN">MAN - 曼彻斯特</option>
                        <option value="EDI">EDI - 爱丁堡</option>
                    </optgroup>
                    <optgroup label="🇪🇺 欧洲">
                        <option value="CDG">CDG - 巴黎( 戴高乐)</option>
                        <option value="AMS">AMS - 阿姆斯特丹</option>
                        <option value="FRA">FRA - 法兰克福</option>
                        <option value="MUC">MUC - 慕尼黑</option>
                        <option value="BER">BER - 柏林</option>
                        <option value="ZRH">ZRH - 苏黎世</option>
                        <option value="FCO">FCO - 罗马</option>
                        <option value="MXP">MXP - 米兰( 马尔彭萨)</option>
                        <option value="BCN">BCN - 巴塞罗那</option>
                        <option value="MAD">MAD - 马德里</option>
                        <option value="ARN">ARN - 斯德哥尔摩</option>
                        <option value="OSL">OSL - 奥斯陆</option>
                        <option value="CPH">CPH - 哥本哈根</option>
                        <option value="HEL">HEL - 赫尔辛基</option>
                        <option value="DUB">DUB - 都柏林</option>
                        <option value="LIS">LIS - 里斯本</option>
                        <option value="ATH">ATH - 雅典</option>
                        <option value="VIE">VIE - 维也纳</option>
                        <option value="PRG">PRG - 布拉格</option>
                        <option value="WAW">WAW - 华沙</option>
                        <option value="BUD">BUD - 布达佩斯</option>
                    </optgroup>
                    <optgroup label="🇦🇪 中东">
                        <option value="DXB">DXB - 迪拜</option>
                        <option value="AUH">AUH - 阿布扎比</option>
                        <option value="DOH">DOH - 多哈</option>
                        <option value="RUH">RUH - 利雅得</option>
                        <option value="JED">JED - 吉达</option>
                        <option value="TLV">TLV - 特拉维夫</option>
                    </optgroup>
                    <optgroup label="🇮🇳 印度">
                        <option value="DEL">DEL - 新德里</option>
                        <option value="BOM">BOM - 孟买</option>
                        <option value="BLR">BLR - 班加罗尔</option>
                        <option value="MAA">MAA - 金奈</option>
                    </optgroup>
                    <optgroup label="🇿🇦 非洲">
                        <option value="JNB">JNB - 约翰内斯堡</option>
                        <option value="CPT">CPT - 开普敦</option>
                        <option value="CAI">CAI - 开罗</option>
                        <option value="NBO">NBO - 内罗毕</option>
                    </optgroup>
                    <optgroup label="🇧🇷 南美">
                        <option value="GRU">GRU - 圣保罗</option>
                        <option value="GIG">GIG - 里约热内卢</option>
                        <option value="EZE">EZE - 布宜诺斯艾利斯</option>
                        <option value="SCL">SCL - 圣地亚哥</option>
                        <option value="BOG">BOG - 波哥大</option>
                        <option value="LIM">LIM - 利马</option>
                    </optgroup>
                </select>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="daysMin">最少天数</label>
                    <input type="number" id="daysMin" name="daysMin" min="1" max="30" value="28" required>
                    <div class="info-text">回国最少天数</div>
                </div>
                <div class="form-group">
                    <label for="daysMax">最多天数</label>
                    <input type="number" id="daysMax" name="daysMax" min="2" max="40" value="38" required>
                    <div class="info-text">回国最多天数</div>
                </div>
            </div>
            
            <div class="form-group">
                <label for="email">邮箱地址</label>
                <input type="email" id="email" name="email" placeholder="your@email.com" required>
                <div class="info-text">每日价格日报将发送到此邮箱</div>
            </div>
            
            <div class="form-group">
                <label for="notifyTime">通知时间</label>
                <select id="notifyTime" name="notifyTime">
                    <option value="10">上午 10:00 (服务器时间)</option>
                    <option value="4">上午 04:00 (服务器时间)</option>
                    <option value="8">上午 08:00 (服务器时间)</option>
                    <option value="14">下午 14:00 (服务器时间)</option>
                    <option value="20">晚上 20:00 (服务器时间)</option>
                </select>
                <div class="info-text">服务器时间 (UTC+8 北京时间)</div>
            </div>
            
            <button type="submit" class="submit-btn">🚀 开始监控</button>
        </form>
        
        <div class="features">
            <h3>✨ 功能特点</h3>
            <ul>
                <li>全球 150+ 机场</li>
                <li>Google Flights 跳转</li>
                <li>一键查看实时价格</li>
                <li>本地保存监控记录</li>
                <li>邮件提醒 (开发中)</li>
            </ul>
        </div>
        
        <div class="footer">
            ✈️ Flight Price Monitor © 2026
        </div>
    </div>
    
    <script>
        // 城市代码到机场名称的映射
        const airportNames = {
            'PEK': '北京', 'PVG': '上海浦东', 'SHA': '上海虹桥', 'CAN': '广州',
            'SZX': '深圳', 'CTU': '成都', 'HGH': '杭州', 'NKG': '南京',
            'XIY': '西安', 'KMG': '昆明', 'TSN': '天津', 'CKG': '重庆',
            'XMN': '厦门', 'DLC': '大连', 'HAK': '海口', 'SYX': '三亚',
            'HKG': '香港', 'MFM': '澳门', 'TPE': '台北',
            'NRT': '东京(成田)', 'HND': '东京(羽田)', 'KIX': '大阪(关西)',
            'NGO': '名古屋', 'FUK': '福冈', 'CTS': '札幌', 'OKA': '冲绳',
            'ICN': '首尔(仁川)', 'GMP': '首尔(金浦)', 'PUS': '釜山', 'CJU': '济州',
            'SIN': '新加坡', 'BKK': '曼谷', 'KUL': '吉隆坡', 'CGK': '雅加达',
            'SGN': '胡志明市', 'HAN': '河内', 'MNL': '马尼拉',
            'SYD': '悉尼', 'MEL': '墨尔本', 'BNE': '布里斯班', 'PER': '珀斯',
            'AKL': '奥克兰', 'WLG': '惠灵顿', 'CHC': '基督城',
            'JFK': '纽约', 'LAX': '洛杉矶', 'SFO': '旧金山', 'ORD': '芝加哥',
            'MIA': '迈阿密', 'SEA': '西雅图', 'LAS': '拉斯维加斯', 'BOS': '波士顿',
            'YYZ': '多伦多', 'YVR': '温哥华', 'YUL': '蒙特利尔', 'YYC': '卡尔加里',
            'LHR': '伦敦', 'CDG': '巴黎', 'AMS': '阿姆斯特丹', 'FRA': '法兰克福',
            'DXB': '迪拜', 'DEL': '新德里', 'JNB': '约翰内斯堡'
        };

        // 生成 Google Flights 搜索链接
        function generateSearchUrl(from, to, departureDate) {
            const fromName = airportNames[from] || from;
            const toName = airportNames[to] || to;
            return `https://www.google.com/travel/flights?q=${fromName}%20to%20${toName}%20${departureDate}`;
        }

        document.getElementById('monitorForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const data = Object.fromEntries(formData);
            
            // Validation
            const daysMin = parseInt(data.daysMin);
            const daysMax = parseInt(data.daysMax);
            
            if (daysMax - daysMin > 10) {
                alert('天数间隔不能超过10天！');
                return;
            }
            
            if (data.from === data.to) {
                alert('出发地和目的地不能相同！');
                return;
            }
            
            // 生成 30 天后的日期作为示例
            const departureDate = new Date();
            departureDate.setDate(departureDate.getDate() + 30);
            const dateStr = departureDate.toISOString().split('T')[0];
            
            const searchUrl = generateSearchUrl(data.from, data.to, dateStr);
            
            // 显示成功消息并打开搜索链接
            const confirmed = confirm(
                '✅ 监控已设置！\n\n' +
                `出发地: ${data.from} (${airportNames[data.from] || data.from})\n` +
                `目的地: ${data.to} (${airportNames[data.to] || data.to})\n` +
                `行程天数: ${data.daysMin}-${data.daysMax} 天\n` +
                `邮箱: ${data.email}\n\n` +
                '点击"确定"打开 Google Flights 查看实时价格\n' +
                '(邮件提醒功能开发中...)'
            );
            
            if (confirmed) {
                window.open(searchUrl, '_blank');
            }
            
            // 保存到 localStorage 以便用户管理自己的监控
            saveMonitorToLocal(data, searchUrl);
            this.reset();
        });
        
        // 保存监控到本地存储
        function saveMonitorToLocal(data, searchUrl) {
            const monitors = JSON.parse(localStorage.getItem('flightMonitors') || '[]');
            monitors.push({
                id: Date.now(),
                from: data.from,
                to: data.to,
                daysMin: data.daysMin,
                daysMax: data.daysMax,
                email: data.email,
                searchUrl: searchUrl,
                createdAt: new Date().toISOString()
            });
            localStorage.setItem('flightMonitors', JSON.stringify(monitors));
        }
        
        // 页面加载时显示已保存的监控
        document.addEventListener('DOMContentLoaded', function() {
            const monitors = JSON.parse(localStorage.getItem('flightMonitors') || '[]');
            if (monitors.length > 0) {
                console.log('📋 已保存的监控:', monitors);
            }
        });
    </script>
</body>
</html>
